{"ast":null,"code":"import { BaseMessageSignerWalletAdapter, scopePollingDetectionStrategy, WalletAccountError, WalletConnectionError, WalletDisconnectedError, WalletNotConnectedError, WalletNotReadyError, WalletPublicKeyError, WalletReadyState, WalletSignTransactionError } from '@solana/wallet-adapter-base';\nimport { PublicKey } from '@solana/web3.js';\nexport const HuobiWalletName = 'HuobiWallet';\nexport class HuobiWalletAdapter extends BaseMessageSignerWalletAdapter {\n  constructor() {\n    let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    super();\n    this.name = HuobiWalletName;\n    this.url = 'https://www.huobiwallet.io';\n    this.icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjI0IiBoZWlnaHQ9IjIyNCIgdmlld0JveD0iMCAwIDIyNCAyMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAwTDIyNCAwVjIyNEgwTDAgMFoiIGZpbGw9IiMyMTU3RTIiLz4KPHBhdGggZD0iTTEzMS4wNTkgODEuMTc3MUMxMzEuMDU5IDU3Ljc1MzEgMTE5LjQ1OCAzNy42MzE1IDExMC42MjUgMzEuMDcyOEMxMTAuNjI1IDMxLjA3MjggMTA5Ljk1MyAzMC43MDQyIDExMCAzMS42MjU4VjMxLjYyNThDMTA5LjI2NSA3Ni44MzAzIDg1Ljc2NzIgODkuMDg3NSA3Mi44MzggMTA1LjU4NEM0My4wMjQxIDE0My42NzcgNzAuNzU4NyAxODUuNDU2IDk4Ljk5MzUgMTkzLjEzNkMxMTQuNzk5IDE5Ny40NTIgOTUuMzUwOCAxODUuNDU2IDkyLjg0OTQgMTYwLjIzNUM4OS44MDA3IDEyOS43NDUgMTMxLjA1OSAxMDYuNDQ0IDEzMS4wNTkgODEuMTc3MVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8xMTAxXzEyNSkiLz4KPHBhdGggZD0iTTE0My41OTcgOTYuMzE3NEMxNDMuNDA5IDk2LjE5NDMgMTQzLjE1OCA5Ni4xMDIgMTQyLjk4NiA5Ni4zOTQzQzE0Mi40ODQgMTAyLjEwMiAxMzYuNTYgMTE0LjI4NiAxMjkuMDM3IDEyNS40ODZDMTAzLjU1MiAxNjMuNDU1IDExOC4wNjUgMTgxLjc2MiAxMjYuMjQ3IDE5MS42MzlDMTMwLjk0OSAxOTcuMzQ3IDEyNi4yNDcgMTkxLjYzOSAxMzguMDk2IDE4NS44MDhDMTUyLjczNSAxNzcuMDkyIDE2Mi4yMzQgMTYyLjAyIDE2My42NDMgMTQ1LjI3QzE2NS4yMzMgMTI2Ljc1OCAxNTcuNzk4IDEwOC42IDE0My41OTcgOTYuMzE3NFoiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcl8xMTAxXzEyNSkiLz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xMTAxXzEyNSIgeDE9IjEyMi40MDEiIHkxPSIyMDkuMjk1IiB4Mj0iMTc4LjY2MiIgeTI9IjExMC40NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y3RjZGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IndoaXRlIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhcl8xMTAxXzEyNSIgeDE9IjE1Ny44NjEiIHkxPSIyMDMuMTc3IiB4Mj0iMTg5LjAxNCIgeTI9IjE0MC4wMjIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y3RjZGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IndoaXRlIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==';\n    this._readyState = typeof window === 'undefined' || typeof document === 'undefined' ? WalletReadyState.Unsupported : WalletReadyState.NotDetected;\n\n    this._disconnected = () => {\n      const wallet = this._wallet;\n\n      if (wallet) {\n        wallet.off('disconnect', this._disconnected);\n        this._wallet = null;\n        this._publicKey = null;\n        this.emit('error', new WalletDisconnectedError());\n        this.emit('disconnect');\n      }\n    };\n\n    this._connecting = false;\n    this._wallet = null;\n    this._publicKey = null;\n\n    if (this._readyState !== WalletReadyState.Unsupported) {\n      scopePollingDetectionStrategy(() => {\n        var _a;\n\n        if ((_a = window.huobiWallet) === null || _a === void 0 ? void 0 : _a.isHuobiWallet) {\n          this._readyState = WalletReadyState.Installed;\n          this.emit('readyStateChange', this._readyState);\n          return true;\n        }\n\n        return false;\n      });\n    }\n  }\n\n  get publicKey() {\n    return this._publicKey;\n  }\n\n  get connecting() {\n    return this._connecting;\n  }\n\n  get connected() {\n    var _a;\n\n    return !!((_a = this._wallet) === null || _a === void 0 ? void 0 : _a.isConnected);\n  }\n\n  get readyState() {\n    return this._readyState;\n  }\n\n  async connect() {\n    try {\n      if (this.connected || this.connecting) return;\n      if (this._readyState !== WalletReadyState.Installed) throw new WalletNotReadyError();\n      this._connecting = true; // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\n      const wallet = window.huobiWallet;\n\n      try {\n        await wallet.connect();\n      } catch (error) {\n        throw new WalletConnectionError(error === null || error === void 0 ? void 0 : error.message, error);\n      }\n\n      if (!wallet.publicKey) throw new WalletAccountError();\n      let publicKey;\n\n      try {\n        publicKey = new PublicKey(wallet.publicKey.toBytes());\n      } catch (error) {\n        throw new WalletPublicKeyError(error === null || error === void 0 ? void 0 : error.message, error);\n      }\n\n      wallet.on('disconnect', this._disconnected);\n      this._wallet = wallet;\n      this._publicKey = publicKey;\n      this.emit('connect', publicKey);\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    } finally {\n      this._connecting = false;\n    }\n  }\n\n  async disconnect() {\n    const wallet = this._wallet;\n\n    if (wallet) {\n      wallet.off('disconnect', this._disconnected);\n      this._wallet = null;\n      this._publicKey = null;\n      this.emit('disconnect');\n    }\n  }\n\n  async signTransaction(transaction) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n\n      try {\n        return (await wallet.signTransaction(transaction)) || transaction;\n      } catch (error) {\n        throw new WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n\n  async signAllTransactions(transactions) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n\n      try {\n        return (await wallet.signAllTransactions(transactions)) || transactions;\n      } catch (error) {\n        throw new WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n\n  async signMessage(message) {\n    try {\n      const wallet = this._wallet;\n      if (!wallet) throw new WalletNotConnectedError();\n\n      try {\n        const {\n          signature\n        } = await wallet.signMessage(message);\n        return signature;\n      } catch (error) {\n        throw new WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n      }\n    } catch (error) {\n      this.emit('error', error);\n      throw error;\n    }\n  }\n\n}","map":{"version":3,"mappings":"AAAA,SACIA,8BADJ,EAGIC,6BAHJ,EAIIC,kBAJJ,EAKIC,qBALJ,EAMIC,uBANJ,EAQIC,uBARJ,EASIC,mBATJ,EAUIC,oBAVJ,EAWIC,gBAXJ,EAYIC,0BAZJ,QAaO,6BAbP;AAcA,SAASC,SAAT,QAAuC,iBAAvC;AA0BA,OAAO,MAAMC,eAAe,GAAG,aAAxB;AAEP,OAAM,MAAOC,kBAAP,SAAkCZ,8BAAlC,CAAgE;AAclEa,gBAAiD;AAAA,QAArCC,MAAqC,uEAAF,EAAE;AAC7C;AAdJ,gBAAOH,eAAP;AACA,eAAM,4BAAN;AACA,gBACI,4xDADJ;AAMQ,uBACJ,OAAOI,MAAP,KAAkB,WAAlB,IAAiC,OAAOC,QAAP,KAAoB,WAArD,GACMR,gBAAgB,CAACS,WADvB,GAEMT,gBAAgB,CAACU,WAHnB;;AA2IA,yBAAgB,MAAK;AACzB,YAAMC,MAAM,GAAG,KAAKC,OAApB;;AACA,UAAID,MAAJ,EAAY;AACRA,cAAM,CAACE,GAAP,CAAW,YAAX,EAAyB,KAAKC,aAA9B;AAEA,aAAKF,OAAL,GAAe,IAAf;AACA,aAAKG,UAAL,GAAkB,IAAlB;AAEA,aAAKC,IAAL,CAAU,OAAV,EAAmB,IAAIpB,uBAAJ,EAAnB;AACA,aAAKoB,IAAL,CAAU,YAAV;AACH;AACJ,KAXO;;AApIJ,SAAKC,WAAL,GAAmB,KAAnB;AACA,SAAKL,OAAL,GAAe,IAAf;AACA,SAAKG,UAAL,GAAkB,IAAlB;;AAEA,QAAI,KAAKG,WAAL,KAAqBlB,gBAAgB,CAACS,WAA1C,EAAuD;AACnDhB,mCAA6B,CAAC,MAAK;;;AAC/B,YAAI,YAAM,CAAC0B,WAAP,MAAkB,IAAlB,IAAkBC,aAAlB,GAAkB,MAAlB,GAAkBA,GAAEC,aAAxB,EAAuC;AACnC,eAAKH,WAAL,GAAmBlB,gBAAgB,CAACsB,SAApC;AACA,eAAKN,IAAL,CAAU,kBAAV,EAA8B,KAAKE,WAAnC;AACA,iBAAO,IAAP;AACH;;AACD,eAAO,KAAP;AACH,OAP4B,CAA7B;AAQH;AACJ;;AAEY,MAATK,SAAS;AACT,WAAO,KAAKR,UAAZ;AACH;;AAEa,MAAVS,UAAU;AACV,WAAO,KAAKP,WAAZ;AACH;;AAEY,MAATQ,SAAS;;;AACT,WAAO,CAAC,EAAC,WAAKb,OAAL,MAAY,IAAZ,IAAYQ,aAAZ,GAAY,MAAZ,GAAYA,GAAEM,WAAf,CAAR;AACH;;AAEa,MAAVC,UAAU;AACV,WAAO,KAAKT,WAAZ;AACH;;AAEY,QAAPU,OAAO;AACT,QAAI;AACA,UAAI,KAAKH,SAAL,IAAkB,KAAKD,UAA3B,EAAuC;AACvC,UAAI,KAAKN,WAAL,KAAqBlB,gBAAgB,CAACsB,SAA1C,EAAqD,MAAM,IAAIxB,mBAAJ,EAAN;AAErD,WAAKmB,WAAL,GAAmB,IAAnB,CAJA,CAMA;;AACA,YAAMN,MAAM,GAAGJ,MAAO,CAACY,WAAvB;;AAEA,UAAI;AACA,cAAMR,MAAM,CAACiB,OAAP,EAAN;AACH,OAFD,CAEE,OAAOC,KAAP,EAAmB;AACjB,cAAM,IAAIlC,qBAAJ,CAA0BkC,KAAK,SAAL,SAAK,WAAL,GAAK,MAAL,QAAK,CAAEC,OAAjC,EAA0CD,KAA1C,CAAN;AACH;;AAED,UAAI,CAAClB,MAAM,CAACY,SAAZ,EAAuB,MAAM,IAAI7B,kBAAJ,EAAN;AAEvB,UAAI6B,SAAJ;;AACA,UAAI;AACAA,iBAAS,GAAG,IAAIrB,SAAJ,CAAcS,MAAM,CAACY,SAAP,CAAiBQ,OAAjB,EAAd,CAAZ;AACH,OAFD,CAEE,OAAOF,KAAP,EAAmB;AACjB,cAAM,IAAI9B,oBAAJ,CAAyB8B,KAAK,SAAL,SAAK,WAAL,GAAK,MAAL,QAAK,CAAEC,OAAhC,EAAyCD,KAAzC,CAAN;AACH;;AAEDlB,YAAM,CAACqB,EAAP,CAAU,YAAV,EAAwB,KAAKlB,aAA7B;AAEA,WAAKF,OAAL,GAAeD,MAAf;AACA,WAAKI,UAAL,GAAkBQ,SAAlB;AAEA,WAAKP,IAAL,CAAU,SAAV,EAAqBO,SAArB;AACH,KA9BD,CA8BE,OAAOM,KAAP,EAAmB;AACjB,WAAKb,IAAL,CAAU,OAAV,EAAmBa,KAAnB;AACA,YAAMA,KAAN;AACH,KAjCD,SAiCU;AACN,WAAKZ,WAAL,GAAmB,KAAnB;AACH;AACJ;;AAEe,QAAVgB,UAAU;AACZ,UAAMtB,MAAM,GAAG,KAAKC,OAApB;;AACA,QAAID,MAAJ,EAAY;AACRA,YAAM,CAACE,GAAP,CAAW,YAAX,EAAyB,KAAKC,aAA9B;AAEA,WAAKF,OAAL,GAAe,IAAf;AACA,WAAKG,UAAL,GAAkB,IAAlB;AAEA,WAAKC,IAAL,CAAU,YAAV;AACH;AACJ;;AAEoB,QAAfkB,eAAe,CAACC,WAAD,EAAyB;AAC1C,QAAI;AACA,YAAMxB,MAAM,GAAG,KAAKC,OAApB;AACA,UAAI,CAACD,MAAL,EAAa,MAAM,IAAId,uBAAJ,EAAN;;AAEb,UAAI;AACA,eAAO,CAAC,MAAMc,MAAM,CAACuB,eAAP,CAAuBC,WAAvB,CAAP,KAA+CA,WAAtD;AACH,OAFD,CAEE,OAAON,KAAP,EAAmB;AACjB,cAAM,IAAI5B,0BAAJ,CAA+B4B,KAAK,SAAL,SAAK,WAAL,GAAK,MAAL,QAAK,CAAEC,OAAtC,EAA+CD,KAA/C,CAAN;AACH;AACJ,KATD,CASE,OAAOA,KAAP,EAAmB;AACjB,WAAKb,IAAL,CAAU,OAAV,EAAmBa,KAAnB;AACA,YAAMA,KAAN;AACH;AACJ;;AAEwB,QAAnBO,mBAAmB,CAACC,YAAD,EAA4B;AACjD,QAAI;AACA,YAAM1B,MAAM,GAAG,KAAKC,OAApB;AACA,UAAI,CAACD,MAAL,EAAa,MAAM,IAAId,uBAAJ,EAAN;;AAEb,UAAI;AACA,eAAO,CAAC,MAAMc,MAAM,CAACyB,mBAAP,CAA2BC,YAA3B,CAAP,KAAoDA,YAA3D;AACH,OAFD,CAEE,OAAOR,KAAP,EAAmB;AACjB,cAAM,IAAI5B,0BAAJ,CAA+B4B,KAAK,SAAL,SAAK,WAAL,GAAK,MAAL,QAAK,CAAEC,OAAtC,EAA+CD,KAA/C,CAAN;AACH;AACJ,KATD,CASE,OAAOA,KAAP,EAAmB;AACjB,WAAKb,IAAL,CAAU,OAAV,EAAmBa,KAAnB;AACA,YAAMA,KAAN;AACH;AACJ;;AAEgB,QAAXS,WAAW,CAACR,OAAD,EAAoB;AACjC,QAAI;AACA,YAAMnB,MAAM,GAAG,KAAKC,OAApB;AACA,UAAI,CAACD,MAAL,EAAa,MAAM,IAAId,uBAAJ,EAAN;;AAEb,UAAI;AACA,cAAM;AAAE0C;AAAF,YAAgB,MAAM5B,MAAM,CAAC2B,WAAP,CAAmBR,OAAnB,CAA5B;AACA,eAAOS,SAAP;AACH,OAHD,CAGE,OAAOV,KAAP,EAAmB;AACjB,cAAM,IAAI5B,0BAAJ,CAA+B4B,KAAK,SAAL,SAAK,WAAL,GAAK,MAAL,QAAK,CAAEC,OAAtC,EAA+CD,KAA/C,CAAN;AACH;AACJ,KAVD,CAUE,OAAOA,KAAP,EAAmB;AACjB,WAAKb,IAAL,CAAU,OAAV,EAAmBa,KAAnB;AACA,YAAMA,KAAN;AACH;AACJ;;AAlJiE","names":["BaseMessageSignerWalletAdapter","scopePollingDetectionStrategy","WalletAccountError","WalletConnectionError","WalletDisconnectedError","WalletNotConnectedError","WalletNotReadyError","WalletPublicKeyError","WalletReadyState","WalletSignTransactionError","PublicKey","HuobiWalletName","HuobiWalletAdapter","constructor","config","window","document","Unsupported","NotDetected","wallet","_wallet","off","_disconnected","_publicKey","emit","_connecting","_readyState","huobiWallet","_a","isHuobiWallet","Installed","publicKey","connecting","connected","isConnected","readyState","connect","error","message","toBytes","on","disconnect","signTransaction","transaction","signAllTransactions","transactions","signMessage","signature"],"sources":["/Users/bryan/solana-crowdfunding/.yarn/cache/@solana-wallet-adapter-huobi-npm-0.1.0-5bbd093bde-c7d68fe5d8.zip/node_modules/@solana/wallet-adapter-huobi/src/adapter.ts"],"sourcesContent":["import {\n    BaseMessageSignerWalletAdapter,\n    EventEmitter,\n    scopePollingDetectionStrategy,\n    WalletAccountError,\n    WalletConnectionError,\n    WalletDisconnectedError,\n    WalletName,\n    WalletNotConnectedError,\n    WalletNotReadyError,\n    WalletPublicKeyError,\n    WalletReadyState,\n    WalletSignTransactionError,\n} from '@solana/wallet-adapter-base';\nimport { PublicKey, Transaction } from '@solana/web3.js';\n\ninterface HuobiWalletEvents {\n    connect(...args: unknown[]): unknown;\n    disconnect(...args: unknown[]): unknown;\n}\n\ninterface HuobiWallet extends EventEmitter<HuobiWalletEvents> {\n    isHuobiWallet?: boolean;\n    publicKey?: { toBytes(): Uint8Array };\n    isConnected: boolean;\n    signTransaction(transaction: Transaction): Promise<Transaction>;\n    signAllTransactions(transactions: Transaction[]): Promise<Transaction[]>;\n    signMessage(message: Uint8Array): Promise<{ signature: Uint8Array }>;\n    connect(): Promise<void>;\n    disconnect(): Promise<void>;\n}\n\ninterface HuobiWalletWindow extends Window {\n    huobiWallet?: HuobiWallet;\n}\n\ndeclare const window: HuobiWalletWindow;\n\nexport interface HuobiWalletAdapterConfig {}\n\nexport const HuobiWalletName = 'HuobiWallet' as WalletName;\n\nexport class HuobiWalletAdapter extends BaseMessageSignerWalletAdapter {\n    name = HuobiWalletName;\n    url = 'https://www.huobiwallet.io';\n    icon =\n        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjI0IiBoZWlnaHQ9IjIyNCIgdmlld0JveD0iMCAwIDIyNCAyMjQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMCAwTDIyNCAwVjIyNEgwTDAgMFoiIGZpbGw9IiMyMTU3RTIiLz4KPHBhdGggZD0iTTEzMS4wNTkgODEuMTc3MUMxMzEuMDU5IDU3Ljc1MzEgMTE5LjQ1OCAzNy42MzE1IDExMC42MjUgMzEuMDcyOEMxMTAuNjI1IDMxLjA3MjggMTA5Ljk1MyAzMC43MDQyIDExMCAzMS42MjU4VjMxLjYyNThDMTA5LjI2NSA3Ni44MzAzIDg1Ljc2NzIgODkuMDg3NSA3Mi44MzggMTA1LjU4NEM0My4wMjQxIDE0My42NzcgNzAuNzU4NyAxODUuNDU2IDk4Ljk5MzUgMTkzLjEzNkMxMTQuNzk5IDE5Ny40NTIgOTUuMzUwOCAxODUuNDU2IDkyLjg0OTQgMTYwLjIzNUM4OS44MDA3IDEyOS43NDUgMTMxLjA1OSAxMDYuNDQ0IDEzMS4wNTkgODEuMTc3MVoiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8xMTAxXzEyNSkiLz4KPHBhdGggZD0iTTE0My41OTcgOTYuMzE3NEMxNDMuNDA5IDk2LjE5NDMgMTQzLjE1OCA5Ni4xMDIgMTQyLjk4NiA5Ni4zOTQzQzE0Mi40ODQgMTAyLjEwMiAxMzYuNTYgMTE0LjI4NiAxMjkuMDM3IDEyNS40ODZDMTAzLjU1MiAxNjMuNDU1IDExOC4wNjUgMTgxLjc2MiAxMjYuMjQ3IDE5MS42MzlDMTMwLjk0OSAxOTcuMzQ3IDEyNi4yNDcgMTkxLjYzOSAxMzguMDk2IDE4NS44MDhDMTUyLjczNSAxNzcuMDkyIDE2Mi4yMzQgMTYyLjAyIDE2My42NDMgMTQ1LjI3QzE2NS4yMzMgMTI2Ljc1OCAxNTcuNzk4IDEwOC42IDE0My41OTcgOTYuMzE3NFoiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcl8xMTAxXzEyNSkiLz4KPGRlZnM+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQwX2xpbmVhcl8xMTAxXzEyNSIgeDE9IjEyMi40MDEiIHkxPSIyMDkuMjk1IiB4Mj0iMTc4LjY2MiIgeTI9IjExMC40NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y3RjZGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IndoaXRlIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhcl8xMTAxXzEyNSIgeDE9IjE1Ny44NjEiIHkxPSIyMDMuMTc3IiB4Mj0iMTg5LjAxNCIgeTI9IjE0MC4wMjIiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0Y3RjZGRiIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IndoaXRlIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==';\n\n    private _connecting: boolean;\n    private _wallet: HuobiWallet | null;\n    private _publicKey: PublicKey | null;\n    private _readyState: WalletReadyState =\n        typeof window === 'undefined' || typeof document === 'undefined'\n            ? WalletReadyState.Unsupported\n            : WalletReadyState.NotDetected;\n\n    constructor(config: HuobiWalletAdapterConfig = {}) {\n        super();\n        this._connecting = false;\n        this._wallet = null;\n        this._publicKey = null;\n\n        if (this._readyState !== WalletReadyState.Unsupported) {\n            scopePollingDetectionStrategy(() => {\n                if (window.huobiWallet?.isHuobiWallet) {\n                    this._readyState = WalletReadyState.Installed;\n                    this.emit('readyStateChange', this._readyState);\n                    return true;\n                }\n                return false;\n            });\n        }\n    }\n\n    get publicKey(): PublicKey | null {\n        return this._publicKey;\n    }\n\n    get connecting(): boolean {\n        return this._connecting;\n    }\n\n    get connected(): boolean {\n        return !!this._wallet?.isConnected;\n    }\n\n    get readyState(): WalletReadyState {\n        return this._readyState;\n    }\n\n    async connect(): Promise<void> {\n        try {\n            if (this.connected || this.connecting) return;\n            if (this._readyState !== WalletReadyState.Installed) throw new WalletNotReadyError();\n\n            this._connecting = true;\n\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            const wallet = window!.huobiWallet!;\n\n            try {\n                await wallet.connect();\n            } catch (error: any) {\n                throw new WalletConnectionError(error?.message, error);\n            }\n\n            if (!wallet.publicKey) throw new WalletAccountError();\n\n            let publicKey: PublicKey;\n            try {\n                publicKey = new PublicKey(wallet.publicKey.toBytes());\n            } catch (error: any) {\n                throw new WalletPublicKeyError(error?.message, error);\n            }\n\n            wallet.on('disconnect', this._disconnected);\n\n            this._wallet = wallet;\n            this._publicKey = publicKey;\n\n            this.emit('connect', publicKey);\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        } finally {\n            this._connecting = false;\n        }\n    }\n\n    async disconnect(): Promise<void> {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n\n            this._wallet = null;\n            this._publicKey = null;\n\n            this.emit('disconnect');\n        }\n    }\n\n    async signTransaction(transaction: Transaction): Promise<Transaction> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                return (await wallet.signTransaction(transaction)) || transaction;\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signAllTransactions(transactions: Transaction[]): Promise<Transaction[]> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                return (await wallet.signAllTransactions(transactions)) || transactions;\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    async signMessage(message: Uint8Array): Promise<Uint8Array> {\n        try {\n            const wallet = this._wallet;\n            if (!wallet) throw new WalletNotConnectedError();\n\n            try {\n                const { signature } = await wallet.signMessage(message);\n                return signature;\n            } catch (error: any) {\n                throw new WalletSignTransactionError(error?.message, error);\n            }\n        } catch (error: any) {\n            this.emit('error', error);\n            throw error;\n        }\n    }\n\n    private _disconnected = () => {\n        const wallet = this._wallet;\n        if (wallet) {\n            wallet.off('disconnect', this._disconnected);\n\n            this._wallet = null;\n            this._publicKey = null;\n\n            this.emit('error', new WalletDisconnectedError());\n            this.emit('disconnect');\n        }\n    };\n}\n"]},"metadata":{},"sourceType":"module"}