{"ast":null,"code":"var _jsxFileName = \"/Users/bryan/solana-crowdfunding/src/components/Card.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from \"react\";\nimport { donateToCampaign, getAllCampaigns, withdraw } from \"../solana\";\nimport { useWallet, useConnection } from \"@solana/wallet-adapter-react\";\nimport { Box, VStack, useColorModeValue, Heading, Text, Stack, Image, Button, FormHelperText, FormControl, InputLeftElement, InputGroup, Input, InputLeftAddon, CircularProgress, useToast } from '@chakra-ui/react';\nimport { Icon } from '@chakra-ui/react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SolanaLogo = props => /*#__PURE__*/_jsxDEV(Icon, {\n  viewBox: \"0 0 397.7 311.7\",\n  ...props,\n  children: [/*#__PURE__*/_jsxDEV(\"linearGradient\", {\n    id: \"a\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: \"360.879\",\n    y1: \"351.455\",\n    x2: \"141.213\",\n    y2: \"-69.294\",\n    gradientTransform: \"matrix(1 0 0 -1 0 314)\",\n    children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n      offset: \"0\",\n      stopColor: \"#00ffa3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n      offset: \"1\",\n      stopColor: \"#dc1fff\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 7\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M64.6 237.9c2.4-2.4 5.7-3.8 9.2-3.8h317.4c5.8 0 8.7 7 4.6 11.1l-62.7 62.7c-2.4 2.4-5.7 3.8-9.2 3.8H6.5c-5.8 0-8.7-7-4.6-11.1l62.7-62.7z\",\n    fill: \"url(#a)\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n    id: \"b\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: \"264.829\",\n    y1: \"401.601\",\n    x2: \"45.163\",\n    y2: \"-19.148\",\n    gradientTransform: \"matrix(1 0 0 -1 0 314)\",\n    children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n      offset: \"0\",\n      stopColor: \"#00ffa3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n      offset: \"1\",\n      stopColor: \"#dc1fff\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 26,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M64.6 3.8C67.1 1.4 70.4 0 73.8 0h317.4c5.8 0 8.7 7 4.6 11.1l-62.7 62.7c-2.4 2.4-5.7 3.8-9.2 3.8H6.5c-5.8 0-8.7-7-4.6-11.1L64.6 3.8z\",\n    fill: \"url(#b)\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"linearGradient\", {\n    id: \"c\",\n    gradientUnits: \"userSpaceOnUse\",\n    x1: \"312.548\",\n    y1: \"376.688\",\n    x2: \"92.882\",\n    y2: \"-44.061\",\n    gradientTransform: \"matrix(1 0 0 -1 0 314)\",\n    children: [/*#__PURE__*/_jsxDEV(\"stop\", {\n      offset: \"0\",\n      stopColor: \"#00ffa3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"stop\", {\n      offset: \"1\",\n      stopColor: \"#dc1fff\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n    d: \"M333.1 120.1c-2.4-2.4-5.7-3.8-9.2-3.8H6.5c-5.8 0-8.7 7-4.6 11.1l62.7 62.7c2.4 2.4 5.7 3.8 9.2 3.8h317.4c5.8 0 8.7-7 4.6-11.1l-62.7-62.7z\",\n    fill: \"url(#c)\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 20,\n  columnNumber: 5\n}, this);\n\n_c = SolanaLogo;\n\nconst Card = _ref => {\n  _s();\n\n  let {\n    data,\n    setCards\n  } = _ref;\n  const [amount, setAmount] = useState(0);\n  const [isLoading, setIsLoading] = useState(false);\n  const toast = useToast();\n  const {\n    connection\n  } = useConnection();\n  const wallet = useWallet();\n\n  const onDonate = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await donateToCampaign(wallet, connection, data.id, amount);\n      let newCards = await getAllCampaigns(connection);\n      setCards(newCards);\n      toast({\n        title: \"Submitted!\",\n        description: \"Your transaction has been confirmed. Thanks for funding the campaign!\",\n        status: \"success\",\n        duration: 10000,\n        isClosable: true,\n        position: 'bottom-left',\n        variant: 'left-accent',\n        containerStyle: {\n          width: '550px',\n          paddingLeft: '50px',\n          paddingBottom: '35px'\n        }\n      });\n    } catch (error) {\n      toast({\n        title: \"Error!\",\n        description: \"Your transaction was not confirmed. Please try again.\",\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: 'bottom-left',\n        variant: 'left-accent',\n        containerStyle: {\n          width: '550px',\n          paddingLeft: '50px',\n          paddingBottom: '35px'\n        }\n      });\n    }\n\n    setIsLoading(false);\n    setAmount(null);\n  };\n\n  const onWithdraw = async e => {\n    e.preventDefault();\n\n    try {\n      await withdraw(wallet, connection, data.id, amount);\n      toast({\n        title: \"Funds withdrawn!\",\n        description: \"Your transaction has been confirmed.\",\n        status: \"success\",\n        duration: 10000,\n        isClosable: true,\n        position: 'bottom-left',\n        variant: 'left-accent',\n        containerStyle: {\n          minWidth: '550px',\n          paddingLeft: '50px',\n          paddingBottom: '35px'\n        }\n      });\n    } catch (e) {\n      console.log(e);\n      toast({\n        title: \"Action not allowed!\",\n        description: \"Only admins can withdraw.\",\n        status: \"error\",\n        duration: 10000,\n        isClosable: true,\n        position: 'bottom-left',\n        variant: 'left-accent',\n        containerStyle: {\n          minWidth: '550px',\n          paddingLeft: '50px',\n          paddingBottom: '35px'\n        }\n      });\n    }\n\n    let newCards = await getAllCampaigns(connection);\n    setCards(newCards);\n    setAmount('');\n  };\n\n  const renderWithdrawContainer = () => {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => onWithdraw(e),\n      children: /*#__PURE__*/_jsxDEV(Stack, {\n        direction: 'row',\n        spacing: 4,\n        children: [/*#__PURE__*/_jsxDEV(FormControl, {\n          isRequired: true,\n          children: /*#__PURE__*/_jsxDEV(InputGroup, {\n            size: 'lg',\n            children: [/*#__PURE__*/_jsxDEV(InputLeftElement, {\n              pointerEvents: \"none\",\n              color: \"gray.300\",\n              fontSize: \"0.9em\",\n              children: /*#__PURE__*/_jsxDEV(SolanaLogo, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 112\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              type: \"number\",\n              placeholder: \"Enter amount to withdraw\",\n              onChange: e => setAmount(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          mt: 10,\n          w: '200px',\n          bg: 'purple.500',\n          color: 'white',\n          size: 'lg',\n          rounded: 'xl',\n          _hover: {\n            transform: 'translateY(-2px)',\n            boxShadow: '0 5px 20px 0px rgb(131 59 156 / 43%)'\n          },\n          children: \"Withdraw\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    mt: 12,\n    role: 'group',\n    p: 6,\n    bg: useColorModeValue('white', 'gray.800'),\n    boxShadow: '2xl',\n    rounded: 'lg',\n    pos: 'relative',\n    zIndex: 1,\n    children: [/*#__PURE__*/_jsxDEV(Box, {\n      rounded: 'lg',\n      mt: -12,\n      pos: 'relative',\n      height: '200px',\n      _after: {\n        transition: 'all .3s ease',\n        content: '\"\"',\n        w: 'full',\n        h: 'full',\n        pos: 'absolute',\n        top: 5,\n        left: 0,\n        backgroundImage: `url(${data.image})`,\n        filter: 'blur(15px)',\n        zIndex: -1\n      },\n      _groupHover: {\n        _after: {\n          filter: 'blur(23px)'\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(Image, {\n        rounded: 'lg',\n        height: '200px',\n        width: 'full',\n        objectFit: 'cover',\n        src: data.image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Stack, {\n      mt: '60px',\n      textAlign: \"left\",\n      spacing: 4,\n      children: [/*#__PURE__*/_jsxDEV(Heading, {\n        fontSize: '2xl',\n        fontFamily: 'body',\n        fontWeight: 650,\n        children: data.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        color: 'black.500',\n        fontSize: 'md',\n        children: data.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: e => onDonate(e),\n        children: /*#__PURE__*/_jsxDEV(Stack, {\n          mb: 4,\n          mt: 4,\n          direction: 'row',\n          spacing: 4,\n          children: [/*#__PURE__*/_jsxDEV(FormControl, {\n            isRequired: true,\n            children: /*#__PURE__*/_jsxDEV(InputGroup, {\n              size: 'lg',\n              children: [/*#__PURE__*/_jsxDEV(InputLeftElement, {\n                pointerEvents: \"none\",\n                color: \"gray.300\",\n                fontSize: \"0.9em\",\n                children: /*#__PURE__*/_jsxDEV(SolanaLogo, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 120\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Input, {\n                type: \"number\",\n                placeholder: \"Enter amount of lamports\",\n                onChange: e => setAmount(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            mt: 10,\n            w: '200px',\n            bg: 'purple.500',\n            color: 'white',\n            size: 'lg',\n            rounded: 'xl',\n            _hover: {\n              transform: 'translateY(-2px)',\n              boxShadow: '0 5px 20px 0px rgb(131 59 156 / 43%)'\n            },\n            children: isLoading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n              isIndeterminate: true,\n              size: \"24px\",\n              color: \"purple.500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 37\n            }, this) : 'Fund'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        textColor: \"gray.600\",\n        fontWeight: 600,\n        fontSize: 'xl',\n        bg: \"gray.200\",\n        w: '50%',\n        px: 3,\n        py: 1,\n        borderRadius: 10,\n        borderWidth: 2,\n        children: [data.amount, \" Lamports raised\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 25\n      }, this), wallet.publicKey.toBuffer().every(function (element, index) {\n        return element === data.admin[index];\n      }) && renderWithdrawContainer()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 13\n  }, this);\n};\n\n_s(Card, \"BJI2IVSCXyofmZKRzopkICrTp68=\", false, function () {\n  return [useToast, useConnection, useWallet, useColorModeValue];\n});\n\n_c2 = Card;\nexport default Card;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SolanaLogo\");\n$RefreshReg$(_c2, \"Card\");","map":{"version":3,"sources":["/Users/bryan/solana-crowdfunding/src/components/Card.js"],"names":["useState","donateToCampaign","getAllCampaigns","withdraw","useWallet","useConnection","Box","VStack","useColorModeValue","Heading","Text","Stack","Image","Button","FormHelperText","FormControl","InputLeftElement","InputGroup","Input","InputLeftAddon","CircularProgress","useToast","Icon","SolanaLogo","props","Card","data","setCards","amount","setAmount","isLoading","setIsLoading","toast","connection","wallet","onDonate","e","preventDefault","id","newCards","title","description","status","duration","isClosable","position","variant","containerStyle","width","paddingLeft","paddingBottom","error","onWithdraw","minWidth","console","log","renderWithdrawContainer","target","value","transform","boxShadow","transition","content","w","h","pos","top","left","backgroundImage","image","filter","zIndex","_after","publicKey","toBuffer","every","element","index","admin"],"mappings":"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","sourcesContent":["import { useState } from \"react\";\nimport { donateToCampaign, getAllCampaigns, withdraw } from \"../solana\";\nimport { useWallet, useConnection } from \"@solana/wallet-adapter-react\";\nimport {\n    Box,\n    VStack,\n    useColorModeValue,\n    Heading,\n    Text,\n    Stack,\n    Image,\n    Button, FormHelperText, FormControl, \n    InputLeftElement, InputGroup, Input, InputLeftAddon,\n    CircularProgress,\n    useToast,\n} from '@chakra-ui/react';\nimport { Icon } from '@chakra-ui/react'\n\nconst SolanaLogo = (props) => (\n    <Icon viewBox=\"0 0 397.7 311.7\" {...props}>\n      <linearGradient id=\"a\" gradientUnits=\"userSpaceOnUse\" x1=\"360.879\" y1=\"351.455\" x2=\"141.213\" y2=\"-69.294\" gradientTransform=\"matrix(1 0 0 -1 0 314)\">\n        <stop offset=\"0\" stopColor=\"#00ffa3\"/>\n        <stop offset=\"1\" stopColor=\"#dc1fff\"/>\n        </linearGradient>\n        <path d=\"M64.6 237.9c2.4-2.4 5.7-3.8 9.2-3.8h317.4c5.8 0 8.7 7 4.6 11.1l-62.7 62.7c-2.4 2.4-5.7 3.8-9.2 3.8H6.5c-5.8 0-8.7-7-4.6-11.1l62.7-62.7z\" fill=\"url(#a)\"/>\n        <linearGradient id=\"b\" gradientUnits=\"userSpaceOnUse\" x1=\"264.829\" y1=\"401.601\" x2=\"45.163\" y2=\"-19.148\" gradientTransform=\"matrix(1 0 0 -1 0 314)\">\n            <stop offset=\"0\" stopColor=\"#00ffa3\"/>\n            <stop offset=\"1\" stopColor=\"#dc1fff\"/>\n        </linearGradient>\n        <path d=\"M64.6 3.8C67.1 1.4 70.4 0 73.8 0h317.4c5.8 0 8.7 7 4.6 11.1l-62.7 62.7c-2.4 2.4-5.7 3.8-9.2 3.8H6.5c-5.8 0-8.7-7-4.6-11.1L64.6 3.8z\" fill=\"url(#b)\"/>\n        <linearGradient id=\"c\" gradientUnits=\"userSpaceOnUse\" x1=\"312.548\" y1=\"376.688\" x2=\"92.882\" y2=\"-44.061\" gradientTransform=\"matrix(1 0 0 -1 0 314)\">\n            <stop offset=\"0\" stopColor=\"#00ffa3\"/>\n            <stop offset=\"1\" stopColor=\"#dc1fff\"/>\n        </linearGradient>\n        <path d=\"M333.1 120.1c-2.4-2.4-5.7-3.8-9.2-3.8H6.5c-5.8 0-8.7 7-4.6 11.1l62.7 62.7c2.4 2.4 5.7 3.8 9.2 3.8h317.4c5.8 0 8.7-7 4.6-11.1l-62.7-62.7z\" fill=\"url(#c)\"/>\n    </Icon>\n);\n\nconst Card = ({ data, setCards }) => {\n    const [amount, setAmount] = useState(0);\n    const [isLoading, setIsLoading] = useState(false);\n    const toast = useToast();\n    \n    const { connection } = useConnection();\n    const wallet = useWallet();\n    \n    const onDonate = async (e) => {\n        e.preventDefault();\n        setIsLoading(true);\n        try {\n            await donateToCampaign(wallet, connection, data.id, amount);\n            let newCards = await getAllCampaigns(connection);\n            setCards(newCards);\n            toast({\n                title: \"Submitted!\",\n                description: \"Your transaction has been confirmed. Thanks for funding the campaign!\",\n                status: \"success\",\n                duration: 10000,\n                isClosable: true,\n                position: 'bottom-left',\n                variant: 'left-accent',\n                containerStyle: {\n                    width: '550px',\n                    paddingLeft: '50px',\n                    paddingBottom: '35px',\n                },\n            });           \n        } catch (error) {\n            toast({\n                title: \"Error!\",\n                description: \"Your transaction was not confirmed. Please try again.\",\n                status: \"error\",\n                duration: 10000,\n                isClosable: true,\n                position: 'bottom-left',\n                variant: 'left-accent',\n                containerStyle: {\n                    width: '550px',\n                    paddingLeft: '50px',\n                    paddingBottom: '35px',\n                },\n            });\n        }\n        setIsLoading(false);\n        setAmount(null);\n    };\n\n    const onWithdraw = async (e) => {\n        e.preventDefault();\n        try {\n            await withdraw(wallet, connection, data.id, amount);\n            toast({\n                title: \"Funds withdrawn!\",\n                description: \"Your transaction has been confirmed.\",\n                status: \"success\",\n                duration: 10000,\n                isClosable: true,\n                position: 'bottom-left',\n                variant: 'left-accent',\n                containerStyle: {\n                    minWidth: '550px',\n                    paddingLeft: '50px',\n                    paddingBottom: '35px',\n                },\n            });\n        } catch (e) {\n            console.log(e);\n            toast({\n                title: \"Action not allowed!\",\n                description: \"Only admins can withdraw.\",\n                status: \"error\",\n                duration: 10000,\n                isClosable: true,\n                position: 'bottom-left',\n                variant: 'left-accent',\n                containerStyle: {\n                    minWidth: '550px',\n                    paddingLeft: '50px',\n                    paddingBottom: '35px',\n                },\n            });\n        }\n        let newCards = await getAllCampaigns(connection);\n        setCards(newCards);\n        setAmount('');\n    };\n\n    const renderWithdrawContainer = () => {\n        return (\n            <form onSubmit={(e) => onWithdraw(e)}>\n                <Stack direction={'row'} spacing={4}>\n                    <FormControl isRequired>\n                        <InputGroup size={'lg'}>\n                            <InputLeftElement pointerEvents='none' color='gray.300' fontSize='0.9em' children={<SolanaLogo />} />\n                            <Input type='number' placeholder='Enter amount to withdraw' \n                                onChange={(e) => setAmount(e.target.value)} />\n                        </InputGroup>\n                    </FormControl>\n                    <Button type=\"submit\" mt={10} w={'200px'} bg={'purple.500'} color={'white'} size={'lg'}\n                        rounded={'xl'} \n                        _hover={{\n                            transform: 'translateY(-2px)',\n                            boxShadow:'0 5px 20px 0px rgb(131 59 156 / 43%)',\n                        }}\n                    >\n                        Withdraw\n                    </Button>\n                </Stack>\n            </form>\n        );\n    }\n    \n\n    return (\n            <Box mt={12} role={'group'} p={6} bg={useColorModeValue('white', 'gray.800')}\n                boxShadow={'2xl'} rounded={'lg'} pos={'relative'} zIndex={1}>\n                <Box rounded={'lg'} mt={-12} pos={'relative'} height={'200px'} \n                    _after={{\n                        transition: 'all .3s ease', content: '\"\"',w: 'full',\n                        h: 'full',\n                        pos: 'absolute',\n                        top: 5,\n                        left: 0,\n                        backgroundImage: `url(${data.image})`,\n                        filter: 'blur(15px)',\n                        zIndex: -1,\n                    }}\n                    _groupHover={{\n                        _after: {\n                            filter: 'blur(23px)',\n                        },\n                    }}>\n                    <Image rounded={'lg'} height={'200px'} width={'full'}\n                        objectFit={'cover'} src={data.image}\n                    />\n                </Box>\n                <Stack mt={'60px'} textAlign='left' spacing={4}>\n                    <Heading fontSize={'2xl'} fontFamily={'body'} fontWeight={650}>\n                        {data.title}\n                    </Heading>\n                    <Text color={'black.500'} fontSize={'md'}>\n                        {data.description}\n                    </Text>\n                    <form onSubmit={(e) => onDonate(e)}>\n                        <Stack mb={4} mt={4} direction={'row'} spacing={4}>\n                            <FormControl isRequired>\n                                <InputGroup size={'lg'}>\n                                    <InputLeftElement pointerEvents='none' color='gray.300' fontSize='0.9em' children={<SolanaLogo />} />\n                                    <Input type='number' placeholder='Enter amount of lamports' \n                                        onChange={(e) => setAmount(e.target.value)} />\n                                </InputGroup>\n                            </FormControl>\n                            <Button type=\"submit\" mt={10} w={'200px'} bg={'purple.500'} color={'white'} size={'lg'}\n                                rounded={'xl'} \n                                _hover={{\n                                    transform: 'translateY(-2px)',\n                                    boxShadow:'0 5px 20px 0px rgb(131 59 156 / 43%)',\n                                }}\n                            >\n                                {isLoading ? (\n                                    <CircularProgress isIndeterminate size=\"24px\" color=\"purple.500\" />\n                                    ) : (\n                                        'Fund'\n                                )}\n                            </Button>\n                        </Stack>\n                    </form>\n                        <Text textColor='gray.600' fontWeight={600} fontSize={'xl'} bg='gray.200' \n                            w={'50%'} px={3} py={1} borderRadius={10} borderWidth={2}>\n                            {data.amount} Lamports raised\n                        </Text>\n\n                    {/* Only display withdraw form if wallet publickey equals campaignkey */}\n                    {wallet.publicKey.toBuffer().every(function(element, index) {\n                        return element === data.admin[index]; \n                    }) && renderWithdrawContainer()\n                    }\n                </Stack>\n            </Box>\n    );\n}\n\nexport default Card;\n  "]},"metadata":{},"sourceType":"module"}